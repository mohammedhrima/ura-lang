protoFunc pointer calloc(int len, int size)
protoFunc int write(int fd, pointer ptr, int len)
protoFunc int free(pointer ptr)

func int putchar(char c):
    chars str = calloc(2, 1)
    str[0] = c
    write(1, str, 1)
    free(str)
    return 0

func void putnbr(int n):
    if n < 0:
        putchar('-')
        n = -n
    
    if n == 0:
        putchar('0')
        return
    
    chars digits = "0123456789"
    
    // Count digits
    int temp = n
    int digit_count = 0
    while temp > 0:
        digit_count += 1
        temp = temp / 10
    
    // Allocate buffer for digits
    chars buffer = calloc(digit_count + 1, 1)
    
    // Build number string from right to left in buffer
    int i = digit_count - 1
    while i >= 0:
        int digit = n % 10
        buffer[i] = digits[digit]
        n = n / 10
        i -= 1
    
    // Print all digits at once
    i = 0
    while i < digit_count:
        putchar(buffer[i])
        i += 1
    
    free(buffer)
    return

main():
    putnbr(123)
    putchar('\n')
    putnbr(-456)
    putchar('\n')
    putnbr(0)
    return 0