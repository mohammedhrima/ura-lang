proto fn calloc(int len, int size) pointer
proto fn write(int fd, pointer ptr, int len) int
proto fn free(pointer ptr) int

fn putchar(c: char) int:
    str: chars = calloc(2, 1)
    str[0] = c
    write(1, str, 1)
    free(str)
    return 0

fn putnbr(n: int) void:
    if n < 0:
        putchar('-')
        n = -n
    
    if n == 0:
        putchar('0')
        return
    
    digits: chars = "0123456789"
    
    // Count digits
    temp: int = n
    digit_count: int = 0
    while temp > 0:
        digit_count += 1
        temp = temp / 10
    
    // Allocate buffer for digits
    buffer: chars = calloc(digit_count + 1, 1)
    
    // Build number string from right to left in buffer
    i: int = digit_count - 1
    while i >= 0:
        digit: int = n % 10
        buffer[i] = digits[digit]
        n = n / 10
        i -= 1
    
    // Print all digits at once
    i = 0
    while i < digit_count:
        putchar(buffer[i])
        i += 1
    
    free(buffer)
    return

main():
    putnbr(123)
    putchar('\n')
    putnbr(-456)
    putchar('\n')
    putnbr(0)
    return 0